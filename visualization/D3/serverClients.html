<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Server/Client Relationships</title>
		<script type="text/javascript" src="d3.js"></script>
		<style type="text/css">
					#title {
		    font-family: serif;
		    font-variant: small-caps;
		    font-size: 20px;
		    text-align: left;
		    text-decoration: underline;
		    text-shadow: 2px 2px 2px gray;
		}
		
		#master {
			color: red;
		}
		
		#S1 {
			color: teal;
		}
		
		#S2 {
			color: #001A57;
		}
		
		#S3 {
			color: cyan;
		}
		
		#S4 {
			color: blue;
		}
		
		#G1 {
			color: yellow;
		}
		
		#G2 {
			color: green;
		}
		
		#G3 {
			color: purple;
		}
		
		#G4 {
			color: pink;
		}
		
		#G5 {
			color: orange;
		}
		</style>
	</head>
	<body>
		<p id="title">Server/Client Relationships</p>
		<p id="master">Master Server: Red (every other server is a different shade of blue)</p>
		<p id="S1">Server 1: Dark Cyan</p>
		<p id="S2">Server 2: Dark Blue</p>
		<p id="S3">Server 3: Cyan</p>
		<p id="S4">Server 4: Blue</p>
		<p id="G1">Group 1: Yellow</p>
		<p id="G2">Group 2: Green</p>
		<p id="G3">Group 3: Purple</p>
		<p id="G4">Group 4: Pink</p>
		<p id="G5">Group 5: Orange</p>
		<script type="text/javascript">

			//Width and height
			var w = 500;
			var h = 300;
            
            var arrayTargets = [];

			//Original data
			var dataset = {
				nodes: [
					{ name: "Server 1" },
					{ name: "Server 2" },
					{ name: "Server 3" },
					{ name: "Server 4" },
					{ name: "Client 1, Group 1" },
					{ name: "Client 2, Group 2" },
					{ name: "Client 3, Group 3" },
					{ name: "Client 4, Group 4" },
					{ name: "Client 5, Group 5" },
					{ name: "Client 6, Group 5" },
					{ name: "Master Server"}
				],
				edges: [
					{ source: 0, target: 1 },
					{ source: 0, target: 4 },
					{ source: 0, target: 8 },
					{ source: 1, target: 2 },
					{ source: 1, target: 9 },
					{ source: 1, target: 5 },
					{ source: 2, target: 3 },
					{ source: 2, target: 6 },
					{ source: 3, target: 0 },
					{ source: 3, target: 7 },
					{ source: 10, target: 0},
					{ source: 10, target: 1},
					{ source: 10, target: 2},
					{ source: 10, target: 3}
                        ]  }
			;


			//Initialize a default force layout, using the nodes and edges in dataset
			var force = d3.layout.force()
								 .nodes(dataset.nodes)
								 .links(dataset.edges)
								 .size([w, h])
								 .linkDistance([50])
								 .charge([-100])
								 .start();


			//Create SVG element
			var svg = d3.select("body")
						.append("svg")
						.attr("width", w)
						.attr("height", h);
			
			//Create edges as lines
			var edges = svg.selectAll("line")
				.data(dataset.edges)
				.enter()
				.append("line")
				.style("stroke", "#ccc")
				.style("stroke-width", 1);
			
			//Create nodes as circles
			var nodes = svg.append("g").selectAll("circle")
				.data(dataset.nodes)
				.enter()
				.append("circle")
				.attr("r", 10)
                .on("click", function(d){ d.fixed = 1 - d.fixed; force.start(); })
				.style("fill", function(d) {
					if(d.name.contains("Master Server"))
					{
						return d3.rgb("red");
					}
					else if(d.name.contains("Server 1"))
					{
						return d3.rgb("cyan").darker(1);
					}
					else if(d.name.contains("Server 2"))
					{
						return d3.rgb("blue").darker(1);
					}
					else if(d.name.contains("Server 3"))
					{
						return d3.rgb("cyan");
					}
					else if(d.name.contains("Server 4"))
					{
						return d3.rgb("blue");
					}
					else if(d.name.contains("Group 1"))
					{
						return d3.rgb("yellow");
					}
					else if(d.name.contains("Group 2"))
					{
						return d3.rgb("green");
					}
					else if(d.name.contains("Group 3"))
					{
						return d3.rgb("purple");
					}
					else if(d.name.contains("Group 4"))
					{
						return d3.rgb("pink");
					}
					else if(d.name.contains("Group 5"))
					{
						return d3.rgb("orange");
					}
				})
           
				.call(force.drag)
            ;
            
            
            
			//Every time the simulation "ticks", this will be called
			force.on("tick", function() {

				edges.attr("x1", function(d) { return d.source.x; })
					 .attr("y1", function(d) { return d.source.y; })
					 .attr("x2", function(d) { return d.target.x; })
					 .attr("y2", function(d) { return d.target.y; });

				nodes.attr("cx", function(d) { return d.x; })
                     
					 .attr("cy", function(d) { return d.y; })
                     .append("title").text(function(d){
                                           return d.name;
                                           });
                     
			});


		</script>
	</body>
</html>
